!function(e,t){function o(e){return t.extend({use_number:!1,use_symbol:!1,use_spaces:!0},e)}var n=500;random.ready()&&(n=0),e.sentencePassword=function(t,n){var r,s,a,d=0,i=[];for(n=o(n),a=0;a<t.length;a++){if(s=t[a],!(r=words[s]))throw new Error('Unknown token "'+s+'"');i.push(random.choice(r)),d+=Math.log(r.length)/Math.log(2)}if(!n.use_spaces)for(a=0;a<i.length;a++)s=i[a],s=s.substr(0,1).toUpperCase()+s.substr(1),i[a]=s;var c={password:i.join(" "),entropy:d};if(n.use_number){var u=e.addReplacement({a:"4",e:"3",i:"1",o:"0",q:"9",s:"5",t:"7",z:"2"},c.password);c.password=u.password,c.entropy+=u.entropy}if(n.use_symbol){var u=e.addReplacement({a:"@",b:"|3",c:"(",h:"|-|",i:"!",k:"|<",l:"|",t:"+",v:"\\/",s:"$",x:"%"},c.password);c.password=u.password,c.entropy+=u.entropy}return n.use_spaces||(c.password=c.password.replace(/ /g,"")),c},e.addReplacement=function(e,t){var o,n=t.split(""),r=new RegExp("["+Object.keys(e)+"]","g");do{o=random.random(n.length)}while(!n[o].match(r));return n[o]=e[n[o]],{password:n.join(""),entropy:Math.log(t.match(r).length)/Math.log(2)}},e.templateEntropy=function(e,t){return t=o(t),0},t(document).ready(function(){var o=t(".entropy-page .entropy-bar div"),r=t(".entropy-page .reminder"),s=function(){r.addClass("visible")},a=null,d=function(){function o(e){for(;/(\d+)(\d{3})/.test(e.toString());)e=e.toString().replace(/(\d+)(\d{3})/,"$1,$2");return e}var n=["adjective","noun","verb","adjective","noun"],r=t("#options")[0];r.use_more_words.checked&&(n=["article","adjective","noun","verb","article","adjective","noun"]),r.diceware.checked&&(n=["diceware","diceware","diceware","diceware","diceware"],r.use_more_words.checked&&(n=n.concat(["diceware","diceware"])));var s=e.sentencePassword(n,{use_number:r.use_number.checked,use_symbol:r.use_symbol.checked,use_spaces:r.use_spaces.checked});t("#password").text(s.password);var a=s.entropy.toFixed(1),d=Math.pow(2,s.entropy-1);t(".stats").show(),t(".entropy").html(a+" bits of entropy"),t(".seconds").html(o((d/1e12).toFixed(1))+" seconds"),t(".minutes").html(o((d/6e13).toFixed(1))+" minutes"),t(".hours").html(o((d/36e14).toFixed(1))+" hours"),t(".days").html(o((d/864e14).toFixed(1))+" days"),t(".years").html(o((d/31536e15).toFixed(1))+" years")};t(".generate-btn").click(d),0==n&&(t(".entropy-page").hide(),t(".main-page").show(),d());var i=function(e,i,c){r.removeClass("visible"),a&&clearTimeout(a),a=setTimeout(s,5e3),random.addEntropy(e+i+c),n--,0==n?(t(".entropy-page").hide(),t(".main-page").show(),d()):n>0&&n%10==0&&o.css("width",(500-n)/500*100+"%")};t(document).on("mousemove",function(e){i(e.clientX,e.clientY,e.timeStamp)}).on("touchmove",function(e){!random.ready()&&navigator.userAgent.match(/android/i)&&e.preventDefault(),e=e.originalEvent,i(e.touches[0].clientX,e.touches[0].clientY,e.timeStamp)})})}(window,jQuery);