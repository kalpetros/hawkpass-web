!function(e,t){function s(e){return t.extend({use_number:!1,use_symbol:!1,use_spaces:!0},e)}var r=500;random.ready()&&(r=0),e.sentencePassword=function(t,r){var a,o,n,d=0,i=[];for(r=s(r),n=0;n<t.length;n++){if(o=t[n],!(a=words[o]))throw new Error('Unknown token "'+o+'"');i.push(random.choice(a)),d+=Math.log(a.length)/Math.log(2)}if(!r.use_spaces)for(n=0;n<i.length;n++)o=i[n],o=o.substr(0,1).toUpperCase()+o.substr(1),i[n]=o;var c={password:i.join(" "),entropy:d};if(r.use_number){var l=e.addReplacement({a:"4",e:"3",i:"1",o:"0",q:"9",s:"5",t:"7",z:"2"},c.password);c.password=l.password,c.entropy+=l.entropy}if(r.use_symbol){var l=e.addReplacement({a:"@",b:"|3",c:"(",h:"|-|",i:"!",k:"|<",l:"|",t:"+",v:"\\/",s:"$",x:"%"},c.password);c.password=l.password,c.entropy+=l.entropy}return r.use_spaces||(c.password=c.password.replace(/ /g,"")),c},e.addReplacement=function(e,t){var s,r=t.split(""),a=new RegExp("["+Object.keys(e)+"]","g");do{s=random.random(r.length)}while(!r[s].match(a));return r[s]=e[r[s]],{password:r.join(""),entropy:Math.log(t.match(a).length)/Math.log(2)}},e.templateEntropy=function(e,t){return t=s(t),0},t(document).ready(function(){var s=t(".entropy-page .entropy-bar div"),a=t(".entropy-page .reminder"),o=function(){a.addClass("visible")},n=null,d=function(){function s(e){for(;/(\d+)(\d{3})/.test(e.toString());)e=e.toString().replace(/(\d+)(\d{3})/,"$1,$2");return e}var r=["adjective","noun","verb","adjective","noun"],a=t("#options")[0];a.use_more_words.checked&&(r=["article","adjective","noun","verb","article","adjective","noun"]),a.diceware.checked&&(r=["diceware","diceware","diceware","diceware","diceware"],a.use_more_words.checked&&(r=r.concat(["diceware","diceware"])));var o=e.sentencePassword(r,{use_number:a.use_number.checked,use_symbol:a.use_symbol.checked,use_spaces:a.use_spaces.checked});t("#password").text(o.password);var n=o.entropy.toFixed(1),d=Math.pow(2,o.entropy-1);t(".clipboard").removeClass("disabled"),t(".reset").removeClass("disabled"),t(".clipboard").addClass("clipboard-btn"),t(".reset").addClass("reset_button"),t(".stats").show(),t(".entropy").html(n+" bits of entropy"),t(".seconds").html(s((d/1e12).toFixed(1))+" seconds"),t(".minutes").html(s((d/6e13).toFixed(1))+" minutes"),t(".hours").html(s((d/36e14).toFixed(1))+" hours"),t(".days").html(s((d/864e14).toFixed(1))+" days"),t(".years").html(s((d/31536e15).toFixed(1))+" years")},i=function(){t(".main-page .password").html('Click <div class="chip">Generate</div> to generate a new password.'),t(".stats").hide(),t(".clipboard").addClass("disabled"),t(".reset").addClass("disabled"),t(".clipboard").removeClass("clipboard-btn"),t(".reset").removeClass("reset-btn")};t(".generate-btn").click(d),t(".reset-btn").click(i),0==r&&(t(".entropy-page").hide(),t(".main-page").show(),d());var c=function(e,i,c){a.removeClass("visible"),n&&clearTimeout(n),n=setTimeout(o,5e3),random.addEntropy(e+i+c),r--,0==r?(t(".entropy-page").hide(),t(".main-page").show(),d()):r>0&&r%10==0&&s.css("width",(500-r)/500*100+"%")};t(document).on("mousemove",function(e){c(e.clientX,e.clientY,e.timeStamp)}).on("touchmove",function(e){!random.ready()&&navigator.userAgent.match(/android/i)&&e.preventDefault(),e=e.originalEvent,c(e.touches[0].clientX,e.touches[0].clientY,e.timeStamp)})})}(window,jQuery);