{"id":"sZVm","dependencies":[{"name":"/home/petros/Dev/hawkpass-web/package.json","includedInParent":true,"mtime":1607544962721}],"generated":{"js":"\"use strict\";function t(){var t=\"\",r=void 0!==window.localStorage?localStorage:{};function e(t){return Crypto.SHA256(t+\"seed\").toString()}function n(t){return Crypto.SHA256(t+\"output\").toString()}function o(){var o=n(t);return t=e(t),r.random_seed=n(t),t=e(t),o}function a(t){var r=o();if(4*r.length<t)throw new Error(\"not enough bits in buffer\");var e=r.slice(0,Math.ceil(t/4));return parseInt(e,16)}this.random=function(t){if(t<1)throw new Error(\"`random()` expects a max greater than 0.\");if(1==t)return 0;var r,e=Math.ceil(Math.log(t)/Math.log(2));do{r=a(e)}while(r>=t);return r},this.choice=function(t){if(0!=t.length)return t[this.random(t.length)]},this.addEntropy=function(r){t=e(t+r)},localStorage.random_seed&&(t=e(localStorage.random_seed+(new Date).valueOf()))}Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.Random=t;"},"sourceMaps":{"js":{"mappings":[{"source":"random.js","original":{"line":105,"column":1},"generated":{"line":1,"column":0}},{"source":"random.js","original":{"line":8,"column":7},"generated":{"line":1,"column":13}},{"source":"random.js","name":"Random","original":{"line":8,"column":16},"generated":{"line":1,"column":22}},{"source":"random.js","name":"buffer","original":{"line":9,"column":6},"generated":{"line":1,"column":26}},{"source":"random.js","name":"buffer","original":{"line":9,"column":6},"generated":{"line":1,"column":30}},{"source":"random.js","original":{"line":9,"column":15},"generated":{"line":1,"column":32}},{"source":"random.js","name":"local_storage","original":{"line":10,"column":6},"generated":{"line":1,"column":35}},{"source":"random.js","original":{"line":11,"column":34},"generated":{"line":1,"column":42}},{"source":"random.js","name":"window","original":{"line":11,"column":11},"generated":{"line":1,"column":46}},{"source":"random.js","name":"localStorage","original":{"line":11,"column":18},"generated":{"line":1,"column":53}},{"source":"random.js","name":"localStorage","original":{"line":11,"column":48},"generated":{"line":1,"column":66}},{"source":"random.js","original":{"line":11,"column":63},"generated":{"line":1,"column":79}},{"source":"random.js","name":"seedOracle","original":{"line":13,"column":11},"generated":{"line":1,"column":82}},{"source":"random.js","name":"seedOracle","original":{"line":13,"column":11},"generated":{"line":1,"column":91}},{"source":"random.js","name":"buffer","original":{"line":13,"column":22},"generated":{"line":1,"column":93}},{"source":"random.js","name":"Crypto","original":{"line":14,"column":11},"generated":{"line":1,"column":96}},{"source":"random.js","name":"Crypto","original":{"line":14,"column":11},"generated":{"line":1,"column":103}},{"source":"random.js","name":"SHA256","original":{"line":14,"column":18},"generated":{"line":1,"column":110}},{"source":"random.js","name":"buffer","original":{"line":14,"column":25},"generated":{"line":1,"column":117}},{"source":"random.js","original":{"line":14,"column":34},"generated":{"line":1,"column":119}},{"source":"random.js","name":"toString","original":{"line":14,"column":42},"generated":{"line":1,"column":127}},{"source":"random.js","name":"outputOracle","original":{"line":17,"column":11},"generated":{"line":1,"column":138}},{"source":"random.js","name":"outputOracle","original":{"line":17,"column":11},"generated":{"line":1,"column":147}},{"source":"random.js","name":"buffer","original":{"line":17,"column":24},"generated":{"line":1,"column":149}},{"source":"random.js","name":"Crypto","original":{"line":18,"column":11},"generated":{"line":1,"column":152}},{"source":"random.js","name":"Crypto","original":{"line":18,"column":11},"generated":{"line":1,"column":159}},{"source":"random.js","name":"SHA256","original":{"line":18,"column":18},"generated":{"line":1,"column":166}},{"source":"random.js","name":"buffer","original":{"line":18,"column":25},"generated":{"line":1,"column":173}},{"source":"random.js","original":{"line":18,"column":34},"generated":{"line":1,"column":175}},{"source":"random.js","name":"toString","original":{"line":18,"column":44},"generated":{"line":1,"column":185}},{"source":"random.js","name":"getRandomBuffer","original":{"line":28,"column":11},"generated":{"line":1,"column":196}},{"source":"random.js","name":"getRandomBuffer","original":{"line":28,"column":11},"generated":{"line":1,"column":205}},{"source":"random.js","name":"output","original":{"line":29,"column":10},"generated":{"line":1,"column":209}},{"source":"random.js","name":"output","original":{"line":29,"column":10},"generated":{"line":1,"column":213}},{"source":"random.js","name":"outputOracle","original":{"line":29,"column":19},"generated":{"line":1,"column":215}},{"source":"random.js","name":"buffer","original":{"line":29,"column":32},"generated":{"line":1,"column":217}},{"source":"random.js","name":"output","original":{"line":32,"column":11},"generated":{"line":1,"column":220}},{"source":"random.js","name":"buffer","original":{"line":30,"column":4},"generated":{"line":1,"column":227}},{"source":"random.js","name":"seedOracle","original":{"line":30,"column":13},"generated":{"line":1,"column":229}},{"source":"random.js","name":"buffer","original":{"line":30,"column":24},"generated":{"line":1,"column":231}},{"source":"random.js","name":"local_storage","original":{"line":48,"column":4},"generated":{"line":1,"column":234}},{"source":"random.js","name":"random_seed","original":{"line":48,"column":18},"generated":{"line":1,"column":236}},{"source":"random.js","name":"outputOracle","original":{"line":48,"column":32},"generated":{"line":1,"column":248}},{"source":"random.js","name":"buffer","original":{"line":48,"column":45},"generated":{"line":1,"column":250}},{"source":"random.js","name":"buffer","original":{"line":51,"column":4},"generated":{"line":1,"column":253}},{"source":"random.js","name":"seedOracle","original":{"line":51,"column":13},"generated":{"line":1,"column":255}},{"source":"random.js","name":"buffer","original":{"line":51,"column":24},"generated":{"line":1,"column":257}},{"source":"random.js","name":"output","original":{"line":32,"column":11},"generated":{"line":1,"column":260}},{"source":"random.js","name":"random_2","original":{"line":35,"column":11},"generated":{"line":1,"column":262}},{"source":"random.js","name":"random_2","original":{"line":35,"column":11},"generated":{"line":1,"column":271}},{"source":"random.js","name":"bits","original":{"line":35,"column":20},"generated":{"line":1,"column":273}},{"source":"random.js","name":"output","original":{"line":36,"column":10},"generated":{"line":1,"column":276}},{"source":"random.js","name":"output","original":{"line":36,"column":10},"generated":{"line":1,"column":280}},{"source":"random.js","name":"getRandomBuffer","original":{"line":36,"column":19},"generated":{"line":1,"column":282}},{"source":"random.js","name":"output","original":{"line":38,"column":8},"generated":{"line":1,"column":286}},{"source":"random.js","original":{"line":38,"column":24},"generated":{"line":1,"column":289}},{"source":"random.js","name":"output","original":{"line":38,"column":8},"generated":{"line":1,"column":291}},{"source":"random.js","name":"length","original":{"line":38,"column":15},"generated":{"line":1,"column":293}},{"source":"random.js","name":"bits","original":{"line":38,"column":28},"generated":{"line":1,"column":300}},{"source":"random.js","original":{"line":39,"column":12},"generated":{"line":1,"column":302}},{"source":"random.js","original":{"line":39,"column":12},"generated":{"line":1,"column":308}},{"source":"random.js","name":"Error","original":{"line":39,"column":16},"generated":{"line":1,"column":312}},{"source":"random.js","original":{"line":39,"column":22},"generated":{"line":1,"column":318}},{"source":"random.js","name":"hex","original":{"line":42,"column":10},"generated":{"line":1,"column":347}},{"source":"random.js","name":"hex","original":{"line":42,"column":10},"generated":{"line":1,"column":351}},{"source":"random.js","name":"output","original":{"line":42,"column":16},"generated":{"line":1,"column":353}},{"source":"random.js","name":"slice","original":{"line":42,"column":23},"generated":{"line":1,"column":355}},{"source":"random.js","original":{"line":42,"column":29},"generated":{"line":1,"column":361}},{"source":"random.js","name":"Math","original":{"line":42,"column":32},"generated":{"line":1,"column":363}},{"source":"random.js","name":"ceil","original":{"line":42,"column":37},"generated":{"line":1,"column":368}},{"source":"random.js","name":"bits","original":{"line":42,"column":42},"generated":{"line":1,"column":373}},{"source":"random.js","original":{"line":42,"column":49},"generated":{"line":1,"column":375}},{"source":"random.js","name":"parseInt","original":{"line":44,"column":11},"generated":{"line":1,"column":379}},{"source":"random.js","name":"parseInt","original":{"line":44,"column":11},"generated":{"line":1,"column":386}},{"source":"random.js","name":"hex","original":{"line":44,"column":20},"generated":{"line":1,"column":395}},{"source":"random.js","original":{"line":44,"column":25},"generated":{"line":1,"column":397}},{"source":"random.js","name":"random","original":{"line":65,"column":7},"generated":{"line":1,"column":401}},{"source":"random.js","name":"random","original":{"line":65,"column":7},"generated":{"line":1,"column":406}},{"source":"random.js","original":{"line":65,"column":16},"generated":{"line":1,"column":413}},{"source":"random.js","name":"max","original":{"line":65,"column":26},"generated":{"line":1,"column":422}},{"source":"random.js","name":"max","original":{"line":66,"column":8},"generated":{"line":1,"column":425}},{"source":"random.js","name":"max","original":{"line":66,"column":8},"generated":{"line":1,"column":428}},{"source":"random.js","original":{"line":66,"column":14},"generated":{"line":1,"column":430}},{"source":"random.js","original":{"line":67,"column":12},"generated":{"line":1,"column":432}},{"source":"random.js","original":{"line":67,"column":12},"generated":{"line":1,"column":438}},{"source":"random.js","name":"Error","original":{"line":67,"column":16},"generated":{"line":1,"column":442}},{"source":"random.js","original":{"line":67,"column":22},"generated":{"line":1,"column":448}},{"source":"random.js","original":{"line":68,"column":11},"generated":{"line":1,"column":492}},{"source":"random.js","original":{"line":68,"column":22},"generated":{"line":1,"column":495}},{"source":"random.js","name":"max","original":{"line":68,"column":15},"generated":{"line":1,"column":498}},{"source":"random.js","original":{"line":69,"column":13},"generated":{"line":1,"column":500}},{"source":"random.js","original":{"line":69,"column":13},"generated":{"line":1,"column":507}},{"source":"random.js","name":"bits","original":{"line":72,"column":10},"generated":{"line":1,"column":509}},{"source":"random.js","name":"n","original":{"line":73,"column":8},"generated":{"line":1,"column":513}},{"source":"random.js","name":"bits","original":{"line":72,"column":10},"generated":{"line":1,"column":515}},{"source":"random.js","name":"Math","original":{"line":72,"column":17},"generated":{"line":1,"column":517}},{"source":"random.js","name":"ceil","original":{"line":72,"column":22},"generated":{"line":1,"column":522}},{"source":"random.js","name":"Math","original":{"line":72,"column":27},"generated":{"line":1,"column":527}},{"source":"random.js","name":"log","original":{"line":72,"column":32},"generated":{"line":1,"column":532}},{"source":"random.js","name":"max","original":{"line":72,"column":36},"generated":{"line":1,"column":536}},{"source":"random.js","name":"Math","original":{"line":72,"column":43},"generated":{"line":1,"column":539}},{"source":"random.js","name":"log","original":{"line":72,"column":48},"generated":{"line":1,"column":544}},{"source":"random.js","original":{"line":72,"column":52},"generated":{"line":1,"column":548}},{"source":"random.js","original":{"line":75,"column":7},"generated":{"line":1,"column":552}},{"source":"random.js","name":"n","original":{"line":76,"column":6},"generated":{"line":1,"column":555}},{"source":"random.js","name":"random_2","original":{"line":76,"column":10},"generated":{"line":1,"column":557}},{"source":"random.js","name":"bits","original":{"line":76,"column":19},"generated":{"line":1,"column":559}},{"source":"random.js","name":"n","original":{"line":77,"column":13},"generated":{"line":1,"column":568}},{"source":"random.js","name":"max","original":{"line":77,"column":18},"generated":{"line":1,"column":571}},{"source":"random.js","name":"n","original":{"line":79,"column":11},"generated":{"line":1,"column":574}},{"source":"random.js","name":"n","original":{"line":79,"column":11},"generated":{"line":1,"column":581}},{"source":"random.js","name":"choice","original":{"line":85,"column":7},"generated":{"line":1,"column":584}},{"source":"random.js","name":"choice","original":{"line":85,"column":7},"generated":{"line":1,"column":589}},{"source":"random.js","original":{"line":85,"column":16},"generated":{"line":1,"column":596}},{"source":"random.js","name":"arr","original":{"line":85,"column":26},"generated":{"line":1,"column":605}},{"source":"random.js","name":"arr","original":{"line":86,"column":8},"generated":{"line":1,"column":608}},{"source":"random.js","original":{"line":86,"column":22},"generated":{"line":1,"column":611}},{"source":"random.js","name":"arr","original":{"line":86,"column":8},"generated":{"line":1,"column":614}},{"source":"random.js","name":"length","original":{"line":86,"column":12},"generated":{"line":1,"column":616}},{"source":"random.js","name":"arr","original":{"line":92,"column":11},"generated":{"line":1,"column":623}},{"source":"random.js","name":"arr","original":{"line":92,"column":11},"generated":{"line":1,"column":630}},{"source":"random.js","original":{"line":90,"column":14},"generated":{"line":1,"column":632}},{"source":"random.js","name":"random","original":{"line":90,"column":19},"generated":{"line":1,"column":637}},{"source":"random.js","name":"arr","original":{"line":90,"column":26},"generated":{"line":1,"column":644}},{"source":"random.js","name":"length","original":{"line":90,"column":30},"generated":{"line":1,"column":646}},{"source":"random.js","name":"addEntropy","original":{"line":98,"column":7},"generated":{"line":1,"column":656}},{"source":"random.js","name":"addEntropy","original":{"line":98,"column":7},"generated":{"line":1,"column":661}},{"source":"random.js","original":{"line":98,"column":20},"generated":{"line":1,"column":672}},{"source":"random.js","name":"entropy","original":{"line":98,"column":30},"generated":{"line":1,"column":681}},{"source":"random.js","name":"buffer","original":{"line":99,"column":4},"generated":{"line":1,"column":684}},{"source":"random.js","name":"seedOracle","original":{"line":99,"column":13},"generated":{"line":1,"column":686}},{"source":"random.js","name":"buffer","original":{"line":99,"column":24},"generated":{"line":1,"column":688}},{"source":"random.js","name":"entropy","original":{"line":99,"column":33},"generated":{"line":1,"column":690}},{"source":"random.js","name":"localStorage","original":{"line":102,"column":6},"generated":{"line":1,"column":694}},{"source":"random.js","name":"random_seed","original":{"line":102,"column":19},"generated":{"line":1,"column":707}},{"source":"random.js","name":"buffer","original":{"line":103,"column":4},"generated":{"line":1,"column":721}},{"source":"random.js","name":"seedOracle","original":{"line":103,"column":13},"generated":{"line":1,"column":723}},{"source":"random.js","name":"localStorage","original":{"line":103,"column":24},"generated":{"line":1,"column":725}},{"source":"random.js","name":"random_seed","original":{"line":103,"column":37},"generated":{"line":1,"column":738}},{"source":"random.js","original":{"line":103,"column":51},"generated":{"line":1,"column":751}},{"source":"random.js","name":"Date","original":{"line":103,"column":55},"generated":{"line":1,"column":755}},{"source":"random.js","name":"valueOf","original":{"line":103,"column":62},"generated":{"line":1,"column":761}},{"source":"random.js","original":{"line":105,"column":1},"generated":{"line":1,"column":773}},{"source":"random.js","original":{"line":105,"column":1},"generated":{"line":1,"column":780}},{"source":"random.js","original":{"line":105,"column":1},"generated":{"line":1,"column":795}},{"source":"random.js","original":{"line":105,"column":1},"generated":{"line":1,"column":803}},{"source":"random.js","original":{"line":105,"column":1},"generated":{"line":1,"column":816}},{"source":"random.js","original":{"line":105,"column":1},"generated":{"line":1,"column":817}},{"source":"random.js","original":{"line":105,"column":1},"generated":{"line":1,"column":824}},{"source":"random.js","original":{"line":105,"column":1},"generated":{"line":1,"column":828}},{"source":"random.js","original":{"line":105,"column":1},"generated":{"line":1,"column":836}},{"source":"random.js","original":{"line":105,"column":1},"generated":{"line":1,"column":843}}],"sources":{"random.js":"/**\n * Class for secure random number generation.\n *\n * @example\n * random.addEntropy(anything) to add some randomness.\n * random.random(max) or random.choice(array) to get some.\n */\nexport function Random() {\n  let buffer = '';\n  let local_storage =\n    typeof window.localStorage != 'undefined' ? localStorage : {};\n\n  function seedOracle(buffer) {\n    return Crypto.SHA256(buffer + 'seed').toString();\n  }\n\n  function outputOracle(buffer) {\n    return Crypto.SHA256(buffer + 'output').toString();\n  }\n\n  /**\n   * Core random generation function.\n   *\n   * Returns a cryptographically secure pseudo-random 256-bit hexadecimal\n   * string.  Though, usually just\n   * '1ec1c26b50d5d3c58d9583181af8076655fe00756bf7285940ba3670f99fcba0'.\n   */\n  function getRandomBuffer() {\n    const output = outputOracle(buffer);\n    buffer = seedOracle(buffer);\n    updateLocalStorage();\n    return output;\n  }\n\n  function random_2(bits) {\n    const output = getRandomBuffer();\n\n    if (output.length * 4 < bits) {\n      throw new Error('not enough bits in buffer');\n    }\n\n    const hex = output.slice(0, Math.ceil(bits / 4));\n\n    return parseInt(hex, 16);\n  }\n\n  function updateLocalStorage() {\n    local_storage.random_seed = outputOracle(buffer);\n    // You must rehash the buffer after (or before) outputting the hash.\n    // Otherwise you may get the same result again and again.\n    buffer = seedOracle(buffer);\n  }\n\n  // function updateLocalStorageTimeout() {\n  //   updateLocalStorage();\n  //   setTimeout(updateLocalStorageTimeout, 5000);\n  // }\n\n  // setTimeout(updateLocalStorageTimeout, 5000);\n\n  /**\n   * `random` returns n such that `0 <= n < max`\n   * `max` must be greater than 0.\n   */\n  this.random = function (max) {\n    if (max < 1) {\n      throw new Error('`random()` expects a max greater than 0.');\n    } else if (max == 1) {\n      return 0;\n    }\n\n    const bits = Math.ceil(Math.log(max) / Math.log(2));\n    let n;\n\n    do {\n      n = random_2(bits);\n    } while (n >= max);\n\n    return n;\n  };\n\n  /**\n   * Returns a random element from an array.\n   */\n  this.choice = function (arr) {\n    if (arr.length == 0) {\n      return;\n    }\n\n    const i = this.random(arr.length);\n\n    return arr[i];\n  };\n\n  /**\n   * Add some entropy to the internal buffer.\n   */\n  this.addEntropy = function (entropy) {\n    buffer = seedOracle(buffer + entropy);\n  };\n\n  if (localStorage.random_seed) {\n    buffer = seedOracle(localStorage.random_seed + new Date().valueOf());\n  }\n}\n"},"lineCount":null}},"error":null,"hash":"9229e705e0570a727d8a333186a75401","cacheData":{"env":{}}}